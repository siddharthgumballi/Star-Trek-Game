[gd_scene load_steps=12 format=3 uid="uid://d3m8n2p5q7xar"]

[ext_resource type="PackedScene" uid="uid://cxl8qs7v8q2r2" path="res://scenes/ship/starship.tscn" id="1_ship"]
[ext_resource type="Script" path="res://scripts/ship/engine_effects.gd" id="3_engine"]
[ext_resource type="Script" path="res://scripts/ship/ship_audio.gd" id="4_audio"]
[ext_resource type="Script" path="res://scripts/ship/warp_drive.gd" id="5_warp"]
[ext_resource type="Script" path="res://scripts/camera/camera_manager.gd" id="6_camera"]
[ext_resource type="Script" path="res://scripts/hud/lcars_hud.gd" id="7_hud"]
[ext_resource type="Script" path="res://scripts/environment/space_object.gd" id="8_space_obj"]
[ext_resource type="Script" path="res://scripts/environment/bridge_interior.gd" id="9_bridge"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_1"]
sky_top_color = Color(0.01, 0.01, 0.02, 1)
sky_horizon_color = Color(0.02, 0.02, 0.04, 1)
ground_bottom_color = Color(0.01, 0.01, 0.02, 1)
ground_horizon_color = Color(0.02, 0.02, 0.04, 1)

[sub_resource type="Sky" id="Sky_1"]
sky_material = SubResource("ProceduralSkyMaterial_1")

[sub_resource type="Environment" id="Environment_1"]
background_mode = 2
sky = SubResource("Sky_1")
ambient_light_source = 2
ambient_light_color = Color(0.15, 0.15, 0.2, 1)
ambient_light_energy = 0.5
tonemap_mode = 2
glow_enabled = true
glow_intensity = 0.5
glow_bloom = 0.1

[node name="Main" type="Node3D"]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_1")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.866025, -0.353553, 0.353553, 0, 0.707107, 0.707107, -0.5, -0.612372, 0.612372, 0, 500, 0)
light_color = Color(1, 0.98, 0.95, 1)
light_energy = 1.5
shadow_enabled = true

[node name="Starship" parent="." instance=ExtResource("1_ship")]

[node name="EngineEffects" type="Node3D" parent="Starship"]
script = ExtResource("3_engine")
ship_controller_path = NodePath("..")

[node name="ShipAudio" type="Node3D" parent="Starship"]
script = ExtResource("4_audio")
ship_controller_path = NodePath("..")

[node name="WarpDrive" type="Node3D" parent="Starship"]
script = ExtResource("5_warp")
ship_controller_path = NodePath("..")

[node name="BridgeInterior" type="Node3D" parent="."]
script = ExtResource("9_bridge")

[node name="CameraManager" type="Node3D" parent="."]
script = ExtResource("6_camera")
target_ship_path = NodePath("../Starship")
bridge_interior_path = NodePath("../BridgeInterior")
external_distance = 4.0
external_height = 1.0
zoom_min = 2.0
zoom_max = 300.0
bridge_offset = Vector3(0, 8, -40)

[node name="LCARSHUD" type="Control" parent="."]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
script = ExtResource("7_hud")
ship_path = NodePath("../Starship")
warp_drive_path = NodePath("../Starship/WarpDrive")
camera_manager_path = NodePath("../CameraManager")

[node name="SpaceObjects" type="Node3D" parent="."]

[node name="Starbase1" type="Node3D" parent="SpaceObjects"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5000, 0, -3000)
script = ExtResource("8_space_obj")
object_name = "Starbase 74"
object_type = 0

[node name="Planet1" type="Node3D" parent="SpaceObjects"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -8000, -1000, 10000)
script = ExtResource("8_space_obj")
object_name = "Earth"
object_type = 2

[node name="Waypoint1" type="Node3D" parent="SpaceObjects"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2000, 500, -5000)
script = ExtResource("8_space_obj")
object_name = "Nav Point Alpha"
object_type = 3

[node name="Waypoint2" type="Node3D" parent="SpaceObjects"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4000, -200, -8000)
script = ExtResource("8_space_obj")
object_name = "Nav Point Beta"
object_type = 3

[node name="OtherShip" type="Node3D" parent="SpaceObjects"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1500, 100, 2000)
script = ExtResource("8_space_obj")
object_name = "USS Excelsior"
object_type = 1

[node name="Asteroid1" type="Node3D" parent="SpaceObjects"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3000, -300, 1000)
script = ExtResource("8_space_obj")
object_name = "Asteroid"
object_type = 4
